<div class="form-container">
  <h2>üìÅ Ajouter un Dossier</h2>

  <form [formGroup]="dossierForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="numeroAffaire">Num√©ro d'affaire</label>
      <input id="numeroAffaire" formControlName="numeroAffaire" type="text" placeholder="Ex : 2024-001-AFF" />
      <div *ngIf="dossierForm.get('numeroAffaire')?.invalid && dossierForm.get('numeroAffaire')?.touched" class="error">
        Num√©ro d'affaire obligatoire
      </div>
    </div>

    <div class="form-group">
      <label for="titre">Titre</label>
      <input id="titre" formControlName="titre" type="text" placeholder="Titre du dossier" />
      <div *ngIf="dossierForm.get('titre')?.invalid && dossierForm.get('titre')?.touched" class="error">
        Titre obligatoire
      </div>
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <textarea id="description" formControlName="description" rows="4" placeholder="D√©cris le dossier ici..."></textarea>
      <div *ngIf="dossierForm.get('description')?.invalid && dossierForm.get('description')?.touched" class="error">
        Description obligatoire
      </div>
    </div>

    <div class="form-group">
      <label for="imagesFichier">Fichiers √† joindre</label>
      <input id="imagesFichier" type="file" (change)="onFileChange($event)" multiple />
      <div *ngIf="fileError" class="error">
        {{ fileError }}
      </div>
    </div>

    <div *ngIf="selectedFiles.length > 0" class="selected-files">
      <h4>Fichiers s√©lectionn√©s :</h4>
      <ul>
        <li *ngFor="let file of selectedFiles; let i = index">
          {{ file.name }} ({{ file.size }} bytes)
          <button type="button" (click)="removeFile(i)">Supprimer</button>
        </li>
      </ul>
    </div>

    <button type="submit" [disabled]="dossierForm.invalid">Ajouter le dossier</button>
  </form>

  <div *ngIf="message" class="alert" [ngClass]="{
    'success': message.includes('succ√®s'),
    'error': message.includes('Erreur')
  }">
    {{ message }}
  </div>
</div>
