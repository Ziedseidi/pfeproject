<div class="saisie-container">
  <div class="saisie-header">
    <h2 class="saisie-title">
      <i class="fas fa-gavel"></i> Affectation d'une Saisie
    </h2>
  </div>

  <!-- Formulaire de recherche -->
  <div class="form-section">
    <form (ngSubmit)="onSearch()" #rechercheForm="ngForm" class="search-form">
      <div class="form-group">
        <label for="numeroAffaire"><i class="fas fa-file-alt"></i> Numéro d'Affaire</label>
        <input type="text" id="numeroAffaire" [(ngModel)]="numeroAffaire" name="numeroAffaire" required>
      </div>
      <button type="submit" [disabled]="rechercheForm.invalid">Rechercher</button>
    </form>
  </div>

  <!-- Détails de l'affaire -->
  <div *ngIf="affaire" class="details-section">
    <h3><i class="fas fa-info-circle"></i> Détails de l'Affaire</h3>
    <div class="details-grid">
      <div><span>Numéro :</span> {{affaire.numeroAffaire}}</div>
      <div><span>Objet :</span> {{affaire.objet}}</div>
      <div><span>Avocat :</span> {{affaire.avocat?.utilisateur?.nom || 'Non assigné'}}</div>
      <div><span>Tribunal :</span> {{affaire.tribunal?.nom || 'Non assigné'}}</div>
    </div>
  </div>

  <!-- Liste des saisies existantes -->
  <div *ngIf="affaire?.saisies?.length" class="existing-section">
    <h3><i class="fas fa-list"></i> Saisies existantes</h3>
    <div class="saisies-grid">
      <div *ngFor="let saisie of affaire.saisies" class="saisie-card">
        <div>N°{{saisie.numeroSaisie}}</div>
        <div>{{saisie.dateAudience | date}}</div>
        <div>{{saisie.objetsSaisis}}</div>
      </div>
    </div>
  </div>

  <!-- Formulaire de saisie -->
  <div class="form-section">
    <h3><i class="fas fa-plus-circle"></i> Nouvelle Saisie</h3>
    <form (ngSubmit)="assignSaisie()" #saisieForm="ngForm" class="saisie-form">
      <div class="form-row">
        <div class="form-group">
          <label for="numeroSaisie">Numéro de Saisie</label>
          <input type="text" id="numeroSaisie" [(ngModel)]="numeroSaisie" name="numeroSaisie" required>
        </div>
        <div class="form-group">
          <label for="dateAudience">Date Audience</label>
          <input type="date" id="dateAudience" [(ngModel)]="dateAudience" name="dateAudience" required>
        </div>
      </div>

      <div class="form-group">
        <label for="objetsSaisis">Objets Saisis</label>
        <textarea id="objetsSaisis" [(ngModel)]="objetsSaisis" name="objetsSaisis" required></textarea>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="nomAdverse">Nom Adverse</label>
          <input type="text" id="nomAdverse" [(ngModel)]="nomAdverse" name="nomAdverse" required>
        </div>
        <div class="form-group">
          <label for="numeroPV">N° PV</label>
          <input type="text" id="numeroPV" [(ngModel)]="numeroPV" name="numeroPV" required>
        </div>
      </div>

      <div class="form-group">
        <label for="montantSaisi">Montant (TND)</label>
        <input type="number" id="montantSaisi" [(ngModel)]="montantSaisi" name="montantSaisi" required>
      </div>

      <button type="submit" [disabled]="saisieForm.invalid">Enregistrer</button>
    </form>
  </div>

  <!-- Messages -->
  <div *ngIf="successMessage" class="message success">
    <i class="fas fa-check"></i> {{successMessage}}
  </div>
  <div *ngIf="errorMessage" class="message error">
    <i class="fas fa-times"></i> {{errorMessage}}
  </div>
</div>