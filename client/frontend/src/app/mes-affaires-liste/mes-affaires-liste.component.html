<div class="affaires-container">
  <div class="affaires-header">
    <h2 class="affaires-title">üìÅ Mes Affaires Assign√©es</h2>
    
    <div class="search-container">
      <input
        type="text"
        class="search-input"
        placeholder="üîç Rechercher par num√©ro ou objet"
        [(ngModel)]="searchTerm"
      />
      <div class="search-border"></div>
    </div>
  </div>

  <!-- √âtats de chargement et erreurs -->
  <div *ngIf="isLoading" class="state-message loading-message">
    <div class="spinner"></div>
    <span>Chargement en cours...</span>
  </div>
  
  <div *ngIf="error" class="state-message error-message">
    <span class="error-icon">!</span>
    {{ error }}
  </div>

  <div *ngIf="!isLoading && !error && filteredAffaires.length === 0" class="state-message empty-message">
    <span class="empty-icon">‚òπÔ∏è</span>
    Aucun r√©sultat trouv√©
  </div>

  <!-- Tableau des affaires -->
  <div *ngIf="filteredAffaires.length > 0" class="affaires-table-container">
    <table class="affaires-table">
      <thead>
        <tr>
          <th>Num√©ro</th>
          <th>Objet</th>
          <th>R√©clamation</th>
          <th>Date Convocation</th>
          <th>Cl√¥ture</th>
          <th>Degr√© Juridique</th>
          <th>Type Client</th>
          <th>Type Tribunal</th>
          <th class="judgment-column">üßæ Issue du Jugement</th>
          <th>Remarques</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let affaire of filteredAffaires">
          <td class="affaire-number">{{ affaire.numeroAffaire }}</td>
          <td class="affaire-object">{{ affaire.objet }}</td>
          <td>{{ affaire.reclamation?.type || 'Non sp√©cifi√©' }}</td>
          <td class="date-cell">{{ affaire.dateConvocation | date: 'dd/MM/yyyy' }}</td>
          <td class="date-cell">{{ affaire.dateCloture | date: 'dd/MM/yyyy' }}</td>
          <td><span class="badge juridique-badge">{{ affaire.degreJuridique }}</span></td>
          <td>{{ affaire.typeClient }}</td>
          <td>{{ affaire.tribunal?.typeTribunal || 'Non sp√©cifi√©' }}</td>
          <td class="judgment-cell">
            <span [class]="'judgment-' + (affaire.jugements?.length ? (affaire.jugements[affaire.jugements.length - 1]?.issue || 'pending') : 'pending')">
              {{
                affaire.jugements?.length
                  ? affaire.jugements[affaire.jugements.length - 1]?.issue || 'Non rendu'
                  : 'Non rendu'
              }}
            </span>
          </td>
          <td class="remarks-cell">{{ affaire.remarques }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>