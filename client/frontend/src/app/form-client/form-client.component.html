<form (ngSubmit)="onSubmit()" #demandeurForm="ngForm" class="form-container">
  <h2>Inscription Demandeur</h2>
  <p class="form-subtitle">Veuillez remplir les informations suivantes</p>

  <div class="form-row">
    <div class="form-group">
      <label for="nom">Nom *</label>
      <input id="nom" name="nom" [(ngModel)]="demandeur.nom" #nom="ngModel" required />
      <div *ngIf="nom.invalid && (nom.dirty || nom.touched)" class="error-message">
        Le nom est requis.
      </div>
    </div>
    <div class="form-group">
      <label for="prenom">Prénom *</label>
      <input id="prenom" name="prenom" [(ngModel)]="demandeur.prenom" #prenom="ngModel" required />
      <div *ngIf="prenom.invalid && (prenom.dirty || prenom.touched)" class="error-message">
        Le prénom est requis.
      </div>
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label for="email">Email *</label>
      <input id="email" name="email" [(ngModel)]="demandeur.email" #email="ngModel" type="email" required />
      <div *ngIf="email.invalid && (email.dirty || email.touched)" class="error-message">
        L'email est requis et doit être valide.
      </div>
    </div>
    <div class="form-group">
      <label for="password">Mot de passe *</label>
      <input id="password" name="password" [(ngModel)]="demandeur.password" #password="ngModel" type="password" required minlength="8" />
      <div *ngIf="password.invalid && (password.dirty || password.touched)" class="error-message">
        Le mot de passe est requis et doit comporter au moins 8 caractères.
      </div>
      <small class="password-hint">Un mot de passe doit contenir au moins 8 caractères, avec une majuscule, un chiffre et un caractère spécial.</small>
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label for="phone">Téléphone *</label>
      <input id="phone" name="phone" [(ngModel)]="demandeur.phone" #phone="ngModel" type="tel" required />
      <div *ngIf="phone.invalid && (phone.dirty || phone.touched)" class="error-message">
        Le numéro de téléphone est requis.
      </div>
    </div>
    <div class="form-group">
      <label for="cin">CIN *</label>
      <input id="cin" name="cin" [(ngModel)]="demandeur.cin" #cin="ngModel" required />
      <div *ngIf="cin.invalid && (cin.dirty || cin.touched)" class="error-message">
        Le CIN est requis.
      </div>
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label for="matricule">Matricule *</label>
      <input id="matricule" name="matricule" [(ngModel)]="demandeur.matricule" #matricule="ngModel" required />
      <div *ngIf="matricule.invalid && (matricule.dirty || matricule.touched)" class="error-message">
        Le matricule est requis.
      </div>
    </div>
    <div class="form-group">
      <label for="ficheCarriere">Fiche Carrière *</label>
      <input id="ficheCarriere" name="ficheCarriere" [(ngModel)]="demandeur.ficheCarriere" #ficheCarriere="ngModel" required />
      <div *ngIf="ficheCarriere.invalid && (ficheCarriere.dirty || ficheCarriere.touched)" class="error-message">
        La fiche carrière est requise.
      </div>
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label for="contratTravail">Contrat de Travail *</label>
      <input id="contratTravail" name="contratTravail" [(ngModel)]="demandeur.contratTravail" #contratTravail="ngModel" required />
      <div *ngIf="contratTravail.invalid && (contratTravail.dirty || contratTravail.touched)" class="error-message">
        Le contrat de travail est requis.
      </div>
    </div>
    <div class="form-group">
      <label for="decisionsPromotions">Décisions de Promotions *</label>
      <input id="decisionsPromotions" name="decisionsPromotions" [(ngModel)]="demandeur.decisionsPromotions" #decisionsPromotions="ngModel" required />
      <div *ngIf="decisionsPromotions.invalid && (decisionsPromotions.dirty || decisionsPromotions.touched)" class="error-message">
        Les décisions de promotions sont requises.
      </div>
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label for="imageprofile">Image de profil *</label>
      <input id="imageprofile" name="imageprofile" type="file" (change)="onFileSelected($event)" required />
      <div *ngIf="!selectedFile && (demandeurForm.touched || demandeurForm.dirty)" class="error-message">
        Veuillez sélectionner une image de profil.
      </div>
    </div>
  </div>

  <div class="form-footer">
    <button type="submit" class="submit-btn" [disabled]="demandeurForm.invalid">S'inscrire →</button>
  </div>
</form>

<p>{{ message }}</p>
